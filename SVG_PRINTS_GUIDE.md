# Руководство по использованию SVG принтов с изменением цвета

## Обзор

Теперь в дизайн-студии поддерживаются SVG принты с возможностью динамического изменения цвета. Это позволяет пользователям создавать более гибкие и настраиваемые дизайны.

## Поддерживаемые форматы

### Растровые изображения (без изменения цвета)
- PNG
- JPG/JPEG
- WEBP

### Векторные изображения (с изменением цвета)
- SVG

## Как это работает

1. **Загрузка SVG**: При загрузке SVG файла система автоматически определяет его тип
2. **Конвертация**: SVG конвертируется в текстуру Three.js через Canvas
3. **Изменение цвета**: При выборе цвета SVG перерисовывается с новым цветом
4. **Кеширование**: Конвертированные текстуры кешируются для производительности

## Использование

### 1. Загрузка SVG принта

```javascript
// В компоненте PrintUpload автоматически определяется тип файла
<input type="file" accept=".png,.jpg,.jpeg,.svg,.webp" />
```

### 2. Изменение цвета

Для SVG принтов автоматически появляется интерфейс выбора цвета:
- Палитра предустановленных цветов
- Выбор произвольного цвета через color picker

### 3. API для разработчиков

```typescript
// Загрузка SVG с цветом
const loadedImage = await UniversalImageLoader.load('/prints/logo.svg', {
  color: '#FF0000',
  width: 1024,
  height: 1024
});

// Обновление цвета существующего SVG
const newTexture = await UniversalImageLoader.updateSVGColor(
  '/prints/logo.svg',
  '#00FF00'
);

// Проверка типа файла
const fileType = UniversalImageLoader.getFileType('logo.svg'); // PrintFileType.VECTOR
```

## Технические детали

### SVG требования
- SVG должен иметь правильную структуру XML
- Поддерживаются атрибуты `fill` и `stroke`
- Поддерживаются inline стили
- Цвет применяется ко всем элементам (кроме тех, где `fill="none"`)

### Производительность
- SVG конвертируются в Canvas текстуры размером 1024x1024 по умолчанию
- Используется кеширование для предотвращения повторной конвертации
- Рекомендуется использовать оптимизированные SVG файлы

### Ограничения
- Градиенты и паттерны заменяются сплошным цветом
- Сложные фильтры могут не поддерживаться
- Размер текстуры ограничен возможностями браузера

## Примеры SVG файлов

### Простой логотип
```svg
<svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
  <rect x="20" y="20" width="160" height="160" rx="20" fill="#000000" />
  <text x="100" y="110" font-size="48" text-anchor="middle" fill="#FFFFFF">LOGO</text>
</svg>
```

### Иконка
```svg
<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">
  <path d="M12 2L2 7v10c0 5.5 3.8 10.7 9 12 5.2-1.3 9-6.5 9-12V7l-10-5z" fill="#000000"/>
</svg>
```

## Демонстрационные файлы

В проекте доступны демонстрационные SVG файлы:
- `/prints/demo_logo.svg` - логотип FT
- `/prints/star_icon.svg` - иконка звезды

## Дальнейшие улучшения

- [ ] Поддержка многоцветных SVG с выбором цвета для каждого элемента
- [ ] Экспорт моделей с сохранением SVG в выбранном цвете
- [ ] Web Worker для асинхронной конвертации больших SVG
- [ ] Поддержка анимированных SVG 